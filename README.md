ระบบแจ้งเตือนผลบอลสดและตารางการแข่งขันผ่าน Line
ระบบนี้เป็นระบบแจ้งเตือนผลบอลสดและตารางการแข่งขันผ่านแอปพลิเคชัน Line โดยใช้ข้อมูลจาก Football API



1. โครงสร้างไฟล์
config.js: ไฟล์สำหรับเก็บค่า configuration ต่างๆ ของระบบ
logger.js: ไฟล์สำหรับสร้างและกำหนดค่า logger สำหรับใช้ในการ log ข้อมูลต่างๆ ของระบบ
footballApi.js: ไฟล์ที่ประกอบด้วยฟังก์ชันสำหรับดึงข้อมูลแมตช์บอลจาก Football API
lineNotify.js: ไฟล์ที่ประกอบด้วยฟังก์ชันสำหรับส่งข้อความแจ้งเตือนไปยัง Line
index.js: ไฟล์หลักของระบบ ที่รวมฟังก์ชันต่างๆ เข้าด้วยกันและควบคุมการทำงานของระบบ



2. การทำงานของแต่ละไฟล์
2.1 config.js
ไฟล์นี้ใช้สำหรับเก็บค่า configuration ต่างๆ ของระบบ ได้แก่:
LINE_ACCESS_TOKEN: Access token สำหรับใช้ในการเชื่อมต่อและส่งข้อความแจ้งเตือนไปยัง Line
FOOTBALL_API_ENDPOINT: URL ของ Football API สำหรับดึงข้อมูลแมตช์บอล
FOOTBALL_API_KEY: API Key สำหรับใช้ในการเรียก Football API

2.2 logger.js
ไฟล์นี้ใช้สำหรับสร้างและกำหนดค่า logger สำหรับใช้ในการ log ข้อมูลต่างๆ ของระบบ โดยใช้ library winston ในการสร้าง logger และกำหนดรูปแบบการ log ข้อมูล

2.3 footballApi.js
ไฟล์นี้ประกอบด้วยฟังก์ชันสำหรับดึงข้อมูลแมตช์บอลจาก Football API ได้แก่:
getMatchesInPlay: ฟังก์ชันสำหรับดึงข้อมูลแมตช์บอลที่กำลังแข่งขันอยู่
getMatchesToday: ฟังก์ชันสำหรับดึงข้อมูลแมตช์บอลที่มีกำหนดการแข่งขันในวันนี้

2.4 lineNotify.js
ไฟล์นี้ประกอบด้วยฟังก์ชันสำหรับส่งข้อความแจ้งเตือนไปยัง Line ได้แก่:
sendNotification: ฟังก์ชันสำหรับส่งข้อความแจ้งเตือนไปยัง Line โดยใช้ Messaging API ของ Line

2.5 index.js
ไฟล์นี้เป็นไฟล์หลักของระบบ ที่รวมฟังก์ชันต่างๆ เข้าด้วยกันและควบคุมการทำงานของระบบ ประกอบด้วยฟังก์ชันหลักดังนี้:
checkLiveScores: ฟังก์ชันสำหรับตรวจสอบผลบอลสดจาก Football API และส่งข้อความแจ้งเตือนไปยัง Line
sendTodayMatches: ฟังก์ชันสำหรับส่งตารางการแข่งขันบอลวันนี้ไปยัง Line
startLiveScoreNotification: ฟังก์ชันสำหรับเริ่มการแจ้งเตือนผลบอลสดตามช่วงเวลาที่กำหนด
getScorers: ฟังก์ชันสำหรับดึงข้อมูลผู้ทำประตูของแต่ละทีมจาก Football API
startSystem: ฟังก์ชันหลักที่เริ่มต้นการทำงานของระบบ โดยจะส่งตารางการแข่งขันบอลวันนี้และเริ่มการแจ้งเตือนผลบอลสด



3. ขั้นตอนการติดตั้งและการ Deploy เพื่อ Test
3.1 ขั้นตอนการติดตั้ง
ทำการ clone หรือ download source code ของระบบจาก repository
เปิด terminal และ navigate ไปยัง directory ของระบบ
รันคำสั่ง npm install เพื่อติดตั้ง dependencies ทั้งหมดที่ระบุใน package.json
สร้างไฟล์ .env ใน directory หลักของระบบ และกำหนดค่า environment variables ดังนี้:
LINE_ACCESS_TOKEN=<Your_Line_Access_Token>
FOOTBALL_API_KEY=<Your_Football_API_Key>
แทนที่ <Your_Line_Access_Token> ด้วย Access token ของ Line และ <Your_Football_API_Key> ด้วย API Key ของ Football API

3.2 การ Deploy เพื่อ Test
รันคำสั่ง npm start เพื่อเริ่มต้นระบบ
ระบบจะเริ่มต้นทำงานโดยส่งตารางการแข่งขันบอลวันนี้ไปยัง Line ทันที และเริ่มการแจ้งเตือนผลบอลสดทุกๆ 1 นาที
สังเกตข้อความแจ้งเตือนที่ถูกส่งไปยัง Line ว่ามีข้อมูลครบถ้วนและถูกต้องหรือไม่
ลองเปลี่ยนแปลงค่า configuration ต่างๆ ใน config.js หรือปรับแต่งฟังก์ชันใน index.js เพื่อทดสอบการทำงานของระบบในสถานการณ์ต่างๆ
หากต้องการหยุดการทำงานของระบบ ให้กด Ctrl + C ใน terminal